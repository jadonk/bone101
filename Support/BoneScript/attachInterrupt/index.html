---
layout: index
title: attachInterrupt
scripts: [ '/static/bonescript-demo.js' ]
style: |
   #code {
    position: relative;
    width: 500px;
    padding-left: 0;
    border-radius: 4px;
    border-bottom-right-radius: 0px;
    border-bottom-left-radius: 0px;
    margin-bottom: 0px;
    margin-left: 30px;
    margin-right: 0px;
    align: left;
   }
   #console-output {
    margin-top: 0px;
    margin-left: 30px;
    width: 496px;
    border: 1px solid #cccccc;
    resize: vertical;
   }
---
    <h2>BoneScript</h2>

    <div id='side-menu' class="t3_sidebar">
     <ul class="left-menu">
      <strong>Navigation</strong>
      <li><a href="{{site.baseurl}}/Support/BoneScript/menu/">Menu contents</a></li>
     </ul>
    </div>
    <div class="t3_content_1">
     <div id='connect-status'></div>
     <div id="content_child">
     <!--- START CONTENT -->

<p>You might be able to see a newer version of this on <a href="http://beagleboard.org/support/bonescript/attachInterrupt">beagleboard.org/support/bonescript/attachInterrupt</a></p>
<h1>attachInterrupt(pin, handler, mode, [callback])</h1>
<p>Detect changes on a digital input line</p>
<p><i><em>Note:</em> This function is still undergoing development and debug.</i></p>
<h2>Arguments</h2>
<ul>
 <li><em>pin</em>: the <a href="{{site.baseurl}}/Support/BoneScript/#pin">BeagleBone pin</a> identifier</li>
 <li><em>handler</em>: 
  <ul>
   <li>true: always call the callback upon interrupt event</li>
   <li>string: evaluated upon interrupt, passed an object with 'value' having
    the state of the input pin and will call callback if evaluates to true</li>
  </ul>
 </li>
 <li><em>mode</em>: RISING, FALLING or CHANGE</li>
 <li><em>callback</em>: called when handler returns true or other events</li>
</ul>
<h2>Return value</h2>
<ul>
 <li><a href="{{site.baseurl}}/Support/BoneScript/#true">true</a> if successful</li>
 <li><a href="{{site.baseurl}}/Support/BoneScript/#false">false</a> on failure</li>
</ul>
<h2>callback(x)</h2>
<ul>
 <li><em>x.pin</em>: pin that generated event</li>
 <li><em>x.output</em>: result of handler function</li>
 <li><em>x.value</em>: input state of the pin generating the interrupt</li>
 <li><em>x.attached</em>: handler successfully attached</li>
 <li><em>x.configured</em>: interrupt handler previously configured</li>
</ul>
<h2>Example
 <button class="dynlink" onclick="demoRun('code')">run</button>
 <button class="dynlink" onclick="demoRestore('code')">restore</button>
</h2>
<pre id="code" class="use-editor" style="height: 240px;">
var b = require('bonescript');
var inputPin = 'P8_19';
b.pinMode(inputPin, b.INPUT);
b.attachInterrupt(inputPin, true, b.CHANGE, interruptCallback);
setTimeout(detach, 12000);

function interruptCallback(x) {
    console.log(JSON.stringify(x));
}

function detach() {
    b.detachInterrupt(inputPin);
    console.log('Interrupt detached');
}</pre>
<div readonly id='console-output' style='height: 280px;'></div>
<h2>Build and execute instructions</h2>
<ul>
 <li>Toggle the state of P8_19 within 12 seconds of starting script.</li>
</ul>
<h2>See also</h2>
<h3>Topics</h3>
<ul>
 <li><a href="{{site.baseurl}}/Support/bone101/#headers">BeagleBone expansion headers</a></li>
 <li><a href="{{site.baseurl}}/Support/BoneScript/#digitalio">Digital I/O</a></li>
</ul>
<h3>Related functions</h3>
<ul>
 <li><a href="{{site.baseurl}}/Support/BoneScript/#require">require</a></li>
 <li><a href="{{site.baseurl}}/Support/BoneScript/pinMode/">pinMode</a></li>
 <li><a href="{{site.baseurl}}/Support/BoneScript/detachInterrupt/">detachInterrupt</a></li>
</ul>
<h3>Examples</h3>
<ul>
 <li><a href="{{site.baseurl}}/Support/BoneScript/cape_bacon/">Bacon Cape</a></li>
</ul>
     </div>
    </div>
